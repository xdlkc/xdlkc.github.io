<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.2',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="keywords" content="tech, blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Unknown Exception Throw">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Unknown Exception Throw">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unknown Exception Throw">

<link rel="canonical" href="http://yoursite.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Unknown Exception Throw</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Unknown Exception Throw</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">lkc's blog</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/29/科大讯飞语音识别sdk使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/29/科大讯飞语音识别sdk使用/" class="post-title-link" itemprop="url">科大讯飞语音识别sdk使用</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-29 01:32:42" itemprop="dateCreated datePublished" datetime="2018-04-29T01:32:42+08:00">2018-04-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2>注册并获取APPID</h2>
<p>先到<a href="http://www.xfyun.cn/" target="_blank" rel="noopener">讯飞开放平台</a>创建一个包含语音识别模块的应用,并复制APPID</p>
<p>&lt;!--more--&gt;</p>
<p><img src="http://otzriul1v.bkt.clouddn.com/18-4-29/62809145.jpg" alt></p>
<h2>下载SDK</h2>
<p><img src="http://otzriul1v.bkt.clouddn.com/18-4-29/95488964.jpg" alt></p>
<p><img src="http://otzriul1v.bkt.clouddn.com/18-4-29/74098769.jpg" alt></p>
<ol>
<li>下载后会得到一个压缩包，将./libs文件夹下的jar文件拷贝到工程目录/app/libs下并通过Android Studio将jar依赖加入进去</li>
<li>将libs下的armeabi文件夹内的so文件拷贝到工程目录/app/main/jniLibs/armeabi下，这里如果没有jniLibs文件夹请手动创建（之所以不拷贝其他架构文件夹的so文件，是因为我加入了地图SDK的so，如果将其他so文件加入的话会崩溃，所以只加了一个）</li>
<li>讯飞还提供了一个语音输入的录音框，将压缩包内assets文件夹里面的内容拷贝到工程目录/app/src/main/assets文件夹下（若assets文件夹不存在，请手动创建）</li>
</ol>
<h2>使用录音框及语音识别</h2>
<ol>
<li>
<p>首先在对应的Activity中构造识别工具(APPID替换为你的APPID):</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SpeechUtility.createUtility(<span class="keyword">this</span>, SpeechConstant.APPID +<span class="string">"=APPID"</span>);</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>创建相应的监听器（gson通过Android Studio add library dependency添加）</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">initListener = <span class="keyword">new</span> InitListener() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInit</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 语音识别返回</span></span><br><span class="line">recognizerDialogListener = <span class="keyword">new</span> RecognizerDialogListener() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResult</span><span class="params">(RecognizerResult recognizerResult, <span class="keyword">boolean</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 由于返回的结果是一个json格式字符串，所以这里我们利用谷歌提供的gson来将其解析到类中</span></span><br><span class="line">    Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">    SpeechDo speechDo = gson.fromJson(recognizerResult.getResultString(),SpeechDo.class);</span><br><span class="line">    <span class="comment">// SpeechDo,SpeechV2,SpeechV3均为自己创建的存储对象，具体属性参照讯飞语音识别返回的结果</span></span><br><span class="line">    <span class="keyword">for</span> (SpeechDo.SpeechV2 speechV2 : speechDo.ws)&#123;</span><br><span class="line">      <span class="keyword">for</span> (SpeechDo.SpeechV3 speechV3 : speechV2.cw)&#123;</span><br><span class="line">        speechBuilder.append(speechV3.w);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 是否为识别的最后一个单词，是的话进行下一步处理</span></span><br><span class="line">    <span class="keyword">if</span> (speechDo.ls)&#123;</span><br><span class="line">      </span><br><span class="line">      speechToText();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(SpeechError speechError)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>在合适的位置（如按钮点击事件创建录音框）</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///1.创建 RecognizerDialog 对象</span></span><br><span class="line">RecognizerDialog mDialog = <span class="keyword">new</span> RecognizerDialog(<span class="keyword">this</span>, initListener);</span><br><span class="line"><span class="comment">//若要将 RecognizerDialog 用于语义理解，必须添加以下参数设置，设置之后 onResult 回调返回将是语义理解的结果</span></span><br><span class="line"><span class="comment">// mDialog.setParameter("asr_sch", "1");</span></span><br><span class="line"><span class="comment">// mDialog.setParameter("nlp_version", "3.0");</span></span><br><span class="line"><span class="comment">// 设置中文</span></span><br><span class="line">mDialog.setParameter(SpeechConstant. LANGUAGE, <span class="string">"zh_cn"</span> );</span><br><span class="line">mDialog.setParameter(SpeechConstant. ACCENT, <span class="string">"mandarin"</span> );</span><br><span class="line"><span class="comment">//3.设置回调接口</span></span><br><span class="line">mDialog.setListener( recognizerDialogListener );</span><br><span class="line"><span class="comment">//4.显示 dialog，接收语音输入</span></span><br><span class="line">mDialog.show();</span><br></pre></td></tr></table></figure></p>
<p>​</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/责任链模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/责任链模式/" class="post-title-link" itemprop="url">责任链模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-28 21:33:13" itemprop="dateCreated datePublished" datetime="2018-04-28T21:33:13+08:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-patterns/" itemprop="url" rel="index">
                    <span itemprop="name">design patterns</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>
<p>定义:</p>
<p><strong>责任链模式</strong>在<a href="https://zh.wikipedia.org/wiki/%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88" target="_blank" rel="noopener">面向对象程式设计</a>里是一种<a href="https://zh.wikipedia.org/wiki/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">软件设计模式</a>，它包含了一些命令对象和一系列的处理对象。每一个处理对象决定它能处理哪些命令对象，它也知道如何将它不能处理的命令对象传递给该链中的下一个处理对象。该模式还描述了往该处理链的末尾添加新的处理对象的方法。       ---维基百科</p>
<p>&lt;!--more--&gt;</p>
</li>
<li>
<p>开闭原则:对于扩展开放,即有新需求过来时可以扩展模块;对于修改关闭,即扩展模块行为时不必修改源代码.</p>
</li>
<li>
<p>我理解来说就是在一次事件请求中有一个请求发送方和多个请求接收方,发送方不需要知道自己的请求到底会被谁接收,他只需要把请求发给第一个接收方,接下来就由第一个接收方抉择自己能处理的话就自己处理,自己不能处理就返回下一个接收方接收的结果,从而降低了发送方和接收方的耦合程度,但是也有一些要求:比如每个接收方肯定都要有处理请求的方法,除了最后一个接收方,其他接收方必须存储下个接收方的指针.</p>
</li>
<li>
<p>先思考一下下面这个场景,无论在公司或是学校,肯定都会有审批什么东西或者事情的经历,拿审批请假来说,首先第一步是员工写好邮件,说明自己的请假原因及时间,写好之后发给小组主管,主管收到邮件之后有两种处理方式:
1.请假时间比较短,自己这边就可以批了,此时返回审批结果就结束了;
2.请假时间有点长,主管无法决定能不能批
所以这时小组主管会发送审批邮件给所在部门的领导,领导也有同样的两种处理方式,会按照时间长短来决定自己能不能批,一直到公司的上层领导来做最后的决策.</p>
</li>
<li>
<p>这一套流程其实就是责任链模式的体现,展现到代码层面上</p>
<p>首先有一个请求发送方:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> days;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Client</span><span class="params">(String name,<span class="keyword">int</span> days)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.days = days;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sendRequest</span><span class="params">(Handler handler)</span></span>&#123;</span><br><span class="line">        System.out.println(name+<span class="string">"请求请假"</span>+days+<span class="string">"天"</span>);</span><br><span class="line">        <span class="keyword">return</span> handler.handlerRequest(days);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其次有一个抽象的请求接收方来设置几个默认方法:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Handler</span></span>&#123;</span><br><span class="line">    Handler nextHandler = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> days = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Handler</span><span class="params">(<span class="keyword">int</span> days)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.days = days;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">handlerRequest</span><span class="params">(<span class="keyword">int</span> days)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (days &lt;= <span class="keyword">this</span>.days)&#123;</span><br><span class="line">            System.out.println(name()+<span class="string">"同意请假"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (nextHandler == <span class="keyword">null</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">"请假时间过长,所有人无法审批"</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(name()+<span class="string">"无法处理,传递给上一级"</span>);</span><br><span class="line">                <span class="keyword">return</span> nextHandler.handlerRequest(days);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNextHandler</span><span class="params">(Handler handler)</span></span>&#123;</span><br><span class="line">        nextHandler = handler;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getClass().getSimpleName();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后有几个具体的请求接收方继承抽象类:</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Handler1 extends Handler&#123;</span><br><span class="line">    public Handler1(int days) &#123;</span><br><span class="line">        super(days);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Handler2 extends Handler&#123;</span><br><span class="line">    public Handler2(int days) &#123;</span><br><span class="line">        super(days);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Handler3 extends Handler&#123;</span><br><span class="line"></span><br><span class="line">    public Handler3(int days) &#123;</span><br><span class="line">        super(days);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>接下来我们测试一下,设置handler1是第一个接收方:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  Handler1 handler1 = <span class="keyword">new</span> Handler1(<span class="number">10</span>);</span><br><span class="line">  Handler2 handler2 = <span class="keyword">new</span> Handler2(<span class="number">30</span>);</span><br><span class="line">  handler1.setNextHandler(handler2);</span><br><span class="line">  Handler3 handler3 = <span class="keyword">new</span> Handler3(<span class="number">100</span>);</span><br><span class="line">  handler2.setNextHandler(handler3);</span><br><span class="line">  Client client1 = <span class="keyword">new</span> Client(<span class="string">"请求者1"</span>,<span class="number">10</span>);</span><br><span class="line">  client1.sendRequest(handler1);</span><br><span class="line">  Client client2 = <span class="keyword">new</span> Client(<span class="string">"请求者2"</span>,<span class="number">20</span>);</span><br><span class="line">  client2.sendRequest(handler1);</span><br><span class="line">  Client client3 = <span class="keyword">new</span> Client(<span class="string">"请求者3"</span>,<span class="number">50</span>);</span><br><span class="line">  client3.sendRequest(handler1);</span><br><span class="line">  Client client4 = <span class="keyword">new</span> Client(<span class="string">"请求者4"</span>,<span class="number">120</span>);</span><br><span class="line">  client4.sendRequest(handler1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>结果:
<img src="http://upload-images.jianshu.io/upload_images/1890983-d20fb166b39277ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="结果"></p>
</li>
<li>
<p>接下来谈一下这个模式的优点及缺点</p>
<p>优点:降低了两方的耦合程度,使得如果有新的接收方加入或者之前的接收方退出对于发送方来说并不受到干扰,代码满足开闭原则</p>
<p>缺点也比较明显,因为发送方在发出请求之后,请求需要传递到能处理它的接收方才会返回结果,所以导致时间较长,性能较低</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/观察者模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/观察者模式/" class="post-title-link" itemprop="url">观察者模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-28 21:32:37" itemprop="dateCreated datePublished" datetime="2018-04-28T21:32:37+08:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-patterns/" itemprop="url" rel="index">
                    <span itemprop="name">design patterns</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>
<p>定义</p>
<p><strong>观察者模式</strong>定义了对象之间的一对多依赖,这样一来,当一个对象改变状态时,他的所有依赖着都会收到通知并自动更新.&lt;!--more--&gt;</p>
</li>
<li>
<p>考虑这样一个场景,气象中心会隔一段时间更新一次气象数据,比如气温,气压,前端展示的页面要能够发现气象数据更新之后就获取到新数据并展示,比较一般的办法就是实现几个不同的类,比如展示气温,气压之类的,然后一有更新就调用每个类的更新方法来更新,这样的办法很不利于扩展,比如说我要添加一个展示相关的类,我就需要在气象数据的相关类中做修改,这样让两个类之间紧紧的关联在一起,也就是常说的紧耦合了,很不利于当新需求过来时进行扩展;</p>
<p>当然观察者模式就是用来解决类似的问题的,它利用一个主题来表示数据发布更新的源头,用多个实现自一个接口的观察者来负责获取更新数据并处理的类;我们只需要针对当前主题存储它在每次更新时需要通知的观察者信息(同一接口);在数据发生更新时,只需要遍历存储的数据并调用当前观察者类的更新方法即可让观察者获取更新数据,也可以在观察者不想获取新数据时进行注销等操作,这里为什么解决了上述问题,也就是解耦合?因为我们不需要知道每个观察者实现的具体类,只需要让他们继承自同一接口,每次更新时调用接口的更新方法即可,具体怎么更新由每个观察者自己来实现.</p>
</li>
<li>
<p>UML图
<img src="http://upload-images.jianshu.io/upload_images/1890983-fd373a215b029415.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="UML图"></p>
</li>
</ul>
<ul>
<li>
<p>实现</p>
<p>主题接口:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注册观察者</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> observer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">registerObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 移除观察者</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> observer</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">notifyObserver</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>实际主题:
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject_a</span> <span class="keyword">implements</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">    <span class="comment">// 观察者的映射</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String ,Observer&gt; observers = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> String subjectName;</span><br><span class="line">    <span class="comment">// 数据</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> a, b, c;</span><br><span class="line">    Subject_a(String subjectName)&#123;</span><br><span class="line">        <span class="keyword">this</span>.subjectName = subjectName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">registerObserver</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (observers.get(observer.name()) != <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(observer.name()+<span class="string">"已被其他观察者占用,请重新注册!"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(subjectName+<span class="string">"注册"</span>+observer.name());</span><br><span class="line">        observers.put(observer.name(),observer);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">removeObserver</span><span class="params">(Observer observer)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (observers.get(observer.name()) == <span class="keyword">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"观察者"</span>+observer.name()+<span class="string">"不存在,请重新注销!"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(subjectName+<span class="string">"移除"</span>+observer.name());</span><br><span class="line">        observers.remove(observer.name());</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通知观察者</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">notifyObserver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(subjectName+<span class="string">"发布更新,更新数据为 a:"</span>+a+<span class="string">" b:"</span>+b+<span class="string">" c:"</span>+c);</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String ,Observer&gt; entry : observers.entrySet())&#123;</span><br><span class="line">            entry.getValue().update(subjectName,a,b,c);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> observers.size();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dataChanged</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">        <span class="keyword">this</span>.b = b;</span><br><span class="line">        <span class="keyword">this</span>.c = c;</span><br><span class="line">        <span class="keyword">int</span> sum = notifyObserver();</span><br><span class="line">        System.out.println(<span class="string">"接收到"</span>+subjectName+<span class="string">"的人数:"</span>+sum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>观察者接口:
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Observer</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新数据</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subjectName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> a</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> c</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(String subjectName, <span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>实际观察者:
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ObserverA</span> <span class="keyword">implements</span> <span class="title">Observer</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    String observerName;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getObserverName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> observerName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ObserverA(String observerName) &#123;</span><br><span class="line">        <span class="keyword">this</span>.observerName = observerName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String subjectName,<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">        System.out.println(observerName+<span class="string">"收到来    自"</span>+subjectName+<span class="string">"的更新,更新数据为 a:"</span>+a+<span class="string">" b:"</span>+b+<span class="string">" c:"</span>+c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> observerName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>写个代码测试一下:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Subject_a subject_a = <span class="keyword">new</span> Subject_a(<span class="string">"主题1"</span>);</span><br><span class="line">    ObserverA observerA = <span class="keyword">new</span> ObserverA(<span class="string">"观察者1"</span>);</span><br><span class="line">    ObserverA observerA1 = <span class="keyword">new</span> ObserverA(<span class="string">"观察者2"</span>);</span><br><span class="line">    subject_a.registerObserver(observerA);</span><br><span class="line">    subject_a.registerObserver(observerA1);</span><br><span class="line">    subject_a.dataChanged(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">    subject_a.removeObserver(observerA);</span><br><span class="line">    subject_a.dataChanged(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里我们只用了一个主题,可以实现多个主题,来注册不同的观察者,只需要实现接口即可;我们在主题1上注册了两个观察者1,2,并更新一次数据,观察者1,2都会接到数据并更新;接下来移除观察者1,再更新一次数据,会发现观察者1接收不到新的数据了.打印一下输出:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1890983-c66c41294cc8f9a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="输出结果"></p>
</li>
</ul>
<ul>
<li>
<p>谈一谈优缺点:</p>
<p>优点:最重要的一点,观察者模式将主题和观察者解耦合,主题不需要了解观察者内部的实现即可传输数据过去;一对多,一个主题每次更新数据时可以传输给多个观察者,观察者想要接收更新只需要调用注册方法,想要不接收更新只需要调用注销方法,扩展起来很方便.</p>
<p>缺点:由于主题不知道观察者内部的实现,所以主题每次都会把所有更新的数据传给观察者,有可能某一观察者只需要一点数据却接受了全部,一浪费资源,二有可能会产生安全相关的问题;其次每次都是主题数据更新时立马传给观察者,没有考虑有可能此时观察者正在高负载工作,频繁地通知观察者会让观察者接收频率太快,没有观察者自己想获取数据时请求更新更考虑到了性能的问题.</p>
<p>​</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/装饰者模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/装饰者模式/" class="post-title-link" itemprop="url">装饰者模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-28 21:31:34" itemprop="dateCreated datePublished" datetime="2018-04-28T21:31:34+08:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-patterns/" itemprop="url" rel="index">
                    <span itemprop="name">design patterns</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2>场景</h2>
<p>(本例子来自于设计模式之禅)</p>
<p>​	在上小学的时候学校每次期末发成绩都会让家长签字,而这都会让一些学生十分头疼的事情,如果直接给家长看成绩,成绩考的不好家长又会说我们,但是又不能直接改成绩,如何解决呢?&lt;!--more--&gt;有一个同学想到了一个好办法,我先不直接告诉家长成绩,我先说一些这次考试的一些其他数据,比如说每门课最高是多少分啊,我在班级的排名是多少啊,因为如果直接看成绩家长肯定是会跟满分比较的,如果班级最高分才得了80多分,那么这样肯定会比直接说家长会容易接受一些(自己也会少挨点打....);</p>
<p>​	实现起来,可以设计一个成绩相关的类,方法包括汇报成绩单,签字等,然后在实现一个子类,添加两个汇报最高分和排名的方法,这样家长看成绩时可以在内部先调用这两个方法再汇报成绩,这样这个问题是解决了,但是会出现更多的问题,比如,如果家长想先看成绩怎么办?之间的顺序怎么调整,如果又需要其他相关的数据怎么办?难道要继续实现更多的子类吗?那样的话光要调整顺序就需要很多的子类,别说提需求了,所以前人提出了装饰者模式解决了这个问题,具体就是将想要添加的额外数据继承自同一个类,叫做装饰者类,同时装饰者类是与具体操作的类(这里就指家长看成绩的类)继承自同一抽象类的,接下来装饰者类的每一个子类就负责一个装饰方法,比如最高成绩和排名就可以写在两个子类里面,装饰者模式重要的一点是每个子类要保存一个最原始的那个抽象类的对象,毕竟要指出来是要装饰哪个类的,这样之前说的类爆炸的问题就解决了.</p>
<h2>定义</h2>
<p>动态地给一个对象添加一些额外的职责</p>
<h2>构成</h2>
<ul>
<li>Component抽象构件:是一个接口或者抽象类,包含了最基本的方法,最核心的对象</li>
<li>ConcreteComponent具体构件:抽象构件的实现,装饰的对象</li>
<li>Decorator装饰角色:实现一个接口或者抽象方法,包含一个Component类的熟悉属性,作为装饰对象</li>
<li>具体装饰角色:可能会有多个,继承自Decorator,将所要装饰的不同的方法放进这些类中</li>
</ul>
<h2>测试</h2>
<p>代码:
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecoratorPattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Component report;</span><br><span class="line">        report = <span class="keyword">new</span> ConcreteComponent();</span><br><span class="line">        report = <span class="keyword">new</span> ConcreteDecoratorA(report);</span><br><span class="line">        report = <span class="keyword">new</span> ConcreteDecoratorB(report);</span><br><span class="line">        report.operate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象 构件</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体构件</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"原方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 装饰类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Component component;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorator</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.component = component;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operate</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.component.operate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体装饰类A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorA</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteDecoratorA</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(component);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 装饰类A装饰方法</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ConcreteDecoratorA的装饰方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">void</span> <span class="title">operate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.method2();</span><br><span class="line">        <span class="keyword">super</span>.operate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//具体装饰类B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorB</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ConcreteDecoratorB</span><span class="params">(Component component)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(component);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 装饰类B装饰方法</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"ConcreteDecoratorB的装饰方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">void</span> <span class="title">operate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.method1();</span><br><span class="line">        <span class="keyword">super</span>.operate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>运行结果:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1890983-c156c144dbf2b5ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="运行结果"></p>
<h2>优缺点</h2>
<h3>优点</h3>
<ul>
<li>装饰类和被装饰类独立发展,不会互相耦合,也就是说Component不需要知道Decorator具体做了些什么,反过来也是一样</li>
<li>是继承关系的替代方案,无论有多少个修饰类,最后返回的结果还是Component对象</li>
<li>可以动态地扩展一些功能</li>
</ul>
<h3>缺点</h3>
<ul>
<li>如果层数太多,出现问题定位问题比较麻烦,如果问题出现在最底层的修饰类,那么我们要从最高层一直跟踪到最底层才会发现问题,修复时间比较长</li>
</ul>
<h2>感想</h2>
<p>总的来说装饰者模式很多应用的场景是为了替代继承的,继承对于扩展和维护方面相对较复杂,尤其是业务上各种业务模块相类似,利用继承会出现类爆炸的情况,装饰者模式相对来说容易一些;而且对于新需求过来的时候装饰者模式也只需要增加装饰类就可以解决,继承的话还是会迭代更多的类层数.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/单例模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/单例模式/" class="post-title-link" itemprop="url">单例模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-28 21:28:44" itemprop="dateCreated datePublished" datetime="2018-04-28T21:28:44+08:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-patterns/" itemprop="url" rel="index">
                    <span itemprop="name">design patterns</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2>场景</h2>
<p>(本例子来自于设计模式之禅)
中国历史悠久,从秦始皇开始了皇帝主宰整个国家,当然,同一个时代仅存在一个皇帝(后面会说一个特殊情况),大臣们都要听从皇帝发号施令,每天上朝向皇帝汇报任务,类比面向对象程序设计,&lt;!--more--&gt;相当于说是在当前运行环境下,仅存在某个类的一个实例,这个类就可以比作皇帝的位子,这个实例就是谁是皇帝,其他有调用这个类的方法或属性就相当于臣子向皇帝汇报,如何实现呢,关键之处就是只存在一个实例,实例的构造时机是在类初始化时发生的,那么就可以不让其他臣子类有构造皇帝类实例的权力即可,也就是构造方法私有化,那么如果私有化那怎样才能产生实例呢?我们其实可以构造一个当前类的静态对象,类型也是当前类,在其他臣子类想要汇报工作时返回这个对象即可,也就是下面这种情况:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Emperor</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Emperor emperor = <span class="keyword">new</span> Emperor();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Emperor</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Emperor <span class="title">getEmperor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> emperor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>臣子可以这样调用它:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vassal</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">report</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        System.out.println(Emperor.getEmperor()+<span class="string">"皇帝"</span>+msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过<code>getEmperor()</code>方法来得到唯一的皇帝实例即可,当然这种方式最好理解,只通过简单的实现来解决这个例子,接下来正式介绍单例模式</p>
<h2>定义</h2>
<p>确保某一个类只有一个实例,而且自行实例化并向整个系统提供这个实例</p>
<h2>实现</h2>
<p>单例模式的实现有几种,上述的是最简单的,也叫做&quot;饿汉式单例&quot;,因为实例在调用前就已经存在了,下面介绍另外一种实现方式:</p>
<p><strong>懒汉式</strong>(在调用时判断是否存在实例,不存在就创建一个):</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在调用时根据对象状态来决定是否构造对象,非线程安全</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sigleton1</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Sigleton1 sigleton = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Sigleton1</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Sigleton1 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sigleton == <span class="keyword">null</span>)&#123;</span><br><span class="line">            sigleton = <span class="keyword">new</span> Sigleton1();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sigleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这种是一般的思路,调用时判断对象是不是空,是的话new一个,不是的话直接返回即可,单线程下是没有问题的,多线程同步就会出现异常,比如还没有初始化时,A线程判断对象为空准备new,同时B线程也调用了get方法,也判断对象为空准备new,这时就会出现new了两次存在两个实例的情况,显然不符合我们期望的目标,那么我们就可以利用java的<code>synchronized</code>关键字来锁定对象或方法:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 线程安全,资源消耗较大</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sigleton2</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Sigleton2 sigleton = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Sigleton2</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Sigleton2 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sigleton == <span class="keyword">null</span>)&#123;</span><br><span class="line">            sigleton = <span class="keyword">new</span> Sigleton2();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sigleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 线程安全,相对前者资源消耗较小</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sigleton3</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Sigleton3 sigleton = <span class="keyword">null</span>;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Sigleton3</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Sigleton3 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sigleton == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (sigleton)&#123;</span><br><span class="line">                <span class="keyword">if</span> (sigleton == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    sigleton = <span class="keyword">new</span> Sigleton3();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sigleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样实现以后确实不会存在多线程同步问题,但是两者相比,下面的<code>get</code>方法显然锁定所消耗的资源更小,一个是方法级别,一个是对象级别,所以下面的更推荐使用,当然了也许会有疑问,有没有不同步也可以解决这个问题的呢,其实是有的,可以采用内部类调用的方式实现:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 线程安全,且资源消耗较小</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sigleton4</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">BetterSigleton</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Sigleton4 sigleton = <span class="keyword">new</span> Sigleton4();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Sigleton4</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Sigleton4 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BetterSigleton.sigleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这种方法下,内部类已经存储了类的静态实例,<code>get</code>方法只需要返回内部类的静态对象即可,而内部类的初始化是在<code>get</code>方法时才会进行,所以也属于&quot;懒汉式&quot;</p>
<h2>两种方式比较</h2>
<ul>
<li>饿汉式: 在获取实例之前已经初始化了,资源占用刚开始高一些,因为要一直维护这个实例,且线程安全</li>
<li>懒汉式: 在获取实例时才去初始化对象,在获取实例时消耗一些资源,因为只在这时才会初始化,线程安全方面分情况,上面说的第1种非线程安全,2,3,4都是线程安全的</li>
</ul>
<h2>感悟</h2>
<p>单例模式用的比较明显的地方就是spring的bean配置与管理了,对于一个类配置好了一个bean,在其他类用到的时候就把这个类的实例拿给它用就可以了,然后关于懒汉式的几种方式的应用场景,和相互的更深的比较还有待思考,有时间再学习</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/工厂方法模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/工厂方法模式/" class="post-title-link" itemprop="url">工厂方法模式</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-28 21:26:38" itemprop="dateCreated datePublished" datetime="2018-04-28T21:26:38+08:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-patterns/" itemprop="url" rel="index">
                    <span itemprop="name">design patterns</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2>场景</h2>
<p>(本例子来自于Head First 设计模式)
假如我们现在经营着一家披萨店,那么我们需要提供多种不同口味的披萨供用户选择,那么我们可能会这样做:</p>
<p>&lt;!--more--&gt;</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> PizzaEnum&#123;</span><br><span class="line">    CHEESE(<span class="string">"奶酪"</span>),</span><br><span class="line">    VEGGIE(<span class="string">"蔬菜"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getItem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    PizzaEnum(String item) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.item = item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String item;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> PizzaEnum <span class="title">fromItem</span><span class="params">(String item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (PizzaEnum pizzaEnum : PizzaEnum.values())&#123;</span><br><span class="line">            <span class="keyword">if</span> (pizzaEnum.item.equals(item))</span><br><span class="line">                <span class="keyword">return</span> pizzaEnum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"没有找到对应口味的披萨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这个枚举类就代表披萨的不同口味了,那么有了不同口味我们还需要有制作的流程:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(name()+<span class="string">" 准备制作"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(name()+<span class="string">" 开始烘烤"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">name</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getClass().getName();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样就可以把自己的披萨卖给用户了,当然用户是可以自己挑选那种口味的披萨,所以还需要让用户来挑:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">orderPizza</span><span class="params">(PizzaEnum item)</span></span>&#123;</span><br><span class="line">        Pizza pizza;</span><br><span class="line">          <span class="keyword">switch</span> (item)&#123;</span><br><span class="line">            <span class="keyword">case</span> CHEESE:</span><br><span class="line">                pizza =  <span class="keyword">new</span> CheesePizza();</span><br><span class="line">            <span class="keyword">case</span> VEGGIE:</span><br><span class="line">                pizza =  <span class="keyword">new</span> VeggiePizza();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                pizza =  <span class="keyword">new</span> Pizza();</span><br><span class="line">        pizza.prepare();</span><br><span class="line">        pizza.bake();</span><br><span class="line">        System.out.println(<span class="string">"披萨制作完成!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里<code>CheesePizza</code>和<code>VeggiePizza</code>就代表制作不同口味的披萨了,那么我们的披萨店整体就大致完成了,可以开始售卖了.
如果某一天我们的厨师有了新想法,想要做一种新口味的披萨要怎么办呢?肯定就是在<code>orderPizza</code>里面添加新的条件,再添加对应的类;但是这种方式是不是比较麻烦呢?每次有新口味就需要在订披萨的方法里面添加新的条件,这样是不是违反了设计程序的单一职责呢,这个类理应来说只负责做披萨就可以了,具体要做哪种口味的其实我们可以交给其他方法或类来做,这就是工厂方法发挥的时候了,我们定义一个方法:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Pizza <span class="title">createPizza</span><span class="params">(PizzaEnum item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (item)&#123;</span><br><span class="line">    <span class="keyword">case</span> CHEESE:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> CheesePizza();</span><br><span class="line">    <span class="keyword">case</span> VEGGIE:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> VeggiePizza();</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Pizza();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看出,这个方法的功能就是根据参数返回对应的一个披萨的实例,而<code>orderPizza</code>就不用操心要哪种口味的,只需利用一个抽象类表达所有口味的披萨即可,而且有新口味的话只需要在<code>createPizza</code>方法中添加新的条件即可.
口味的问题解决了,那么如果某一天有其他地方的人想加盟我们的披萨店,且他们自己可能由于位置原因有他们口味的披萨,就像中国四川一般喜欢吃辣,云南较为清淡,为了适应不同的地方,我们需要做不同口味的披萨,那要怎么做?
其实我们可以按照前面学习的装饰者模式,设置一个基础类作为抽象类,有基本的功能,不同地方都继承自这个类,有口味需求的话只需要重写相应的方法即可,那么总结起来我们可以把这个场景写成下面这样:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 抽象披萨店,只具有返回不同披萨的抽象方法和订披萨的基本方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">abstract</span> Pizza <span class="title">createPizza</span><span class="params">(PizzaEnum item)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">orderPizza</span><span class="params">(PizzaEnum item)</span></span>&#123;</span><br><span class="line">        Pizza pizza = createPizza(item);</span><br><span class="line">        pizza.prepare();</span><br><span class="line">        pizza.bake();</span><br><span class="line">        System.out.println(<span class="string">"披萨制作完成!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 纽约开的披萨店,可以看出纽约店有他们自己口味的披萨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NYPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function">Pizza <span class="title">createPizza</span><span class="params">(PizzaEnum item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (item)&#123;</span><br><span class="line">        <span class="keyword">case</span> CHEESE:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> NYCheesePizza();</span><br><span class="line">        <span class="keyword">case</span> VEGGIE:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> NYVeggiePizza();</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Pizza();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 华盛顿的店也是同样道理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WSPizzaStore</span> <span class="keyword">extends</span> <span class="title">PizzaStore</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="function">Pizza <span class="title">createPizza</span><span class="params">(PizzaEnum item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (item)&#123;</span><br><span class="line">        <span class="keyword">case</span> CHEESE:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> WSCheesePizza();</span><br><span class="line">        <span class="keyword">case</span> VEGGIE:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> WSVeggiePizza();</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Pizza();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这就是我们的披萨类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">prepare</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(name()+<span class="string">" 准备制作"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">bake</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(name()+<span class="string">" 开始烘烤"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">name</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getClass().getName();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作为学习,这些类里面就没有写其他东西了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NYCheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NYVeggiePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WSVeggiePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WSCheesePizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 披萨的口味</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">enum</span> PizzaEnum&#123;</span><br><span class="line">    CHEESE(<span class="string">"奶酪"</span>),</span><br><span class="line">    VEGGIE(<span class="string">"蔬菜"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getItem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    PizzaEnum(String item) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.item = item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String item;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> PizzaEnum <span class="title">fromItem</span><span class="params">(String item)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (PizzaEnum pizzaEnum : PizzaEnum.values())&#123;</span><br><span class="line">            <span class="keyword">if</span> (pizzaEnum.item.equals(item))</span><br><span class="line">                <span class="keyword">return</span> pizzaEnum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"没有找到对应口味的披萨"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>来做下实验:</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner in = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    System.out.println(<span class="string">"请输入您想去的城市:WS/NY"</span>);</span><br><span class="line">    String name = in.nextLine();</span><br><span class="line">    PizzaStore pizzaStore;</span><br><span class="line">    <span class="keyword">if</span> (name.equals(<span class="string">"WS"</span>))&#123;</span><br><span class="line">        pizzaStore = <span class="keyword">new</span> WSPizzaStore();</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        pizzaStore = <span class="keyword">new</span> NYPizzaStore();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"请输入您想吃的披萨类型:cheese/veggie"</span>);</span><br><span class="line">    String item = in.nextLine();</span><br><span class="line">    pizzaStore.orderPizza(PizzaEnum.fromItem(item));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>结果:
<img src="http://upload-images.jianshu.io/upload_images/1890983-b90cf57f314d7e82.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt>
看到结果跟我们所期望的一样,接下来正式介绍一下工厂方法</p>
<h2>定义</h2>
<p>工厂方法模式（FACTORY METHOD）是一种常用的对象创建型设计模式,此模式的核心精神是封装类中不变的部分，提取其中个性化善变的部分为独立类，通过依赖注入以达到解耦、复用和方便后期维护拓展的目的。它的核心结构有四个角色，分别是抽象工厂；具体工厂；抽象产品；具体产品</p>
<p>定义里面提到了依赖注入,相关的还有一个叫做控制反转(IoC)的东西,都简单介绍下:</p>
<ul>
<li>依赖注入(DI):Dependency Injection,其实与工厂方法定义很像,组件不负责查找资源或其他依赖的对象,这个工作交给IoC容器来做,由容器来返回需要的对象</li>
<li>控制反转(Ioc):Inversion of Control,指的就是上面的容器,本来创建对象的工作是组件自己实例化的,现在我们利用IoC容器,将这个事情交给固定的容器来负责,组件将更多精力放在其他的逻辑上面,管理起来更方便,不会时常出现一些忘记初始化的错误了</li>
</ul>
<p>Spring的核心思想就是依赖注入和控制反转,通过定义Bean将实例化Bean的操作交给配置文件来管理,其他类需要的时候配置文件将bean的实例传给需要的类即可,关于这方面后续会有相应的笔记记录</p>
<h2>优缺点</h2>
<p>优点</p>
<ul>
<li>我们在创建实例时不用关心具体创建了哪种实例,怎么创建的,只需把参数传入工厂即可</li>
<li>很明显,当我们有新的种类添加进来时只需要在具体工厂里面添加相应的条件即可,满足&quot;开闭原则&quot;</li>
</ul>
<p>缺点</p>
<ul>
<li>有新的种类加入时需要添加新的类,数目会较多</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/百度语音识别SDK使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/百度语音识别SDK使用/" class="post-title-link" itemprop="url">百度语音识别SDK使用</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-28 21:18:04" itemprop="dateCreated datePublished" datetime="2018-04-28T21:18:04+08:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/android/" itemprop="url" rel="index">
                    <span itemprop="name">android</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>（待完成）</p>
<p>本次利用百度语音识别主要是做地图app开发中地点的输入简化，让用户输入地点信息时更方便流畅</p>
<p>&lt;!--more--&gt;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/04/28/第一篇文章/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="lkc">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Unknown Exception Throw">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/04/28/第一篇文章/" class="post-title-link" itemprop="url">第一篇文章</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-04-28 18:17:07" itemprop="dateCreated datePublished" datetime="2018-04-28T18:17:07+08:00">2018-04-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-10-17 19:50:48" itemprop="dateModified" datetime="2019-10-17T19:50:48+08:00">2019-10-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>[TOC]</p>
<h1>Linux学习笔记</h1>
<h2>存储管理</h2>
<h3>分区</h3>
<ul>
<li>传统MBR分区方式，最多4个主分区，无法创建大于2TB的分区</li>
</ul>
<p>&lt;!--more--&gt;
查看磁盘分区表</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ lkc-X550LD in ~ [18:38:29] </span><br><span class="line"><span class="meta">$</span> sudo fdisk -l</span><br><span class="line">Disk /dev/sda: 465.8 GiB, 500107862016 bytes, 976773168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">Disklabel type: dos</span><br><span class="line">Disk identifier: 0xb783bed0</span><br><span class="line"></span><br><span class="line">设备       启动     Start      末尾      扇区   Size Id 类型</span><br><span class="line">/dev/sda1  *         2048   1026047   1024000   500M  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda2         1026048 490051583 489025536 233.2G  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda3       490051584 694851583 204800000  97.7G  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda4       694853630 976771071 281917442 134.4G  f W95 扩展 (LBA)</span><br><span class="line">/dev/sda5       797255680 976771071 179515392  85.6G  7 HPFS/NTFS/exFAT</span><br><span class="line">/dev/sda6       694853632 797255679 102402048  48.8G 83 Linux</span><br><span class="line"></span><br><span class="line">Partition 4 does not start on physical sector boundary.</span><br><span class="line">Partition table entries are not in disk order.</span><br></pre></td></tr></table></figure></p>
<p>挂载</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount [选项] [-o [选项]] 设备 挂载目录</span><br></pre></td></tr></table></figure></p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ lkc-X550LD in ~ [18:43:47] </span><br><span class="line"><span class="meta">$</span> mount</span><br><span class="line">sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)</span><br><span class="line">proc on /proc type proc (rw,nosuid,nodev,noexec,relatime)</span><br><span class="line">udev on /dev type devtmpfs (rw,nosuid,relatime,size=4004316k,nr_inodes=1001079,mode=755)</span><br><span class="line">devpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)</span><br><span class="line">tmpfs on /run type tmpfs (rw,nosuid,noexec,relatime,size=805428k,mode=755)</span><br><span class="line">/dev/sda6 on / type ext4 (rw,relatime,errors=remount-ro,data=ordered)</span><br><span class="line">securityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)</span><br><span class="line">tmpfs on /dev/shm type tmpfs (rw,nosuid,nodev)</span><br><span class="line">tmpfs on /run/lock type tmpfs (rw,nosuid,nodev,noexec,relatime,size=5120k)</span><br><span class="line">tmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,mode=755)</span><br><span class="line">cgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/lib/systemd/systemd-cgroups-agent,name=systemd)</span><br><span class="line">pstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)</span><br><span class="line">cgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)</span><br><span class="line">cgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)</span><br><span class="line">cgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)</span><br><span class="line">cgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)</span><br><span class="line">cgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)</span><br><span class="line">cgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,pids)</span><br><span class="line">cgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)</span><br><span class="line">cgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,memory)</span><br><span class="line">cgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)</span><br><span class="line">cgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,hugetlb)</span><br><span class="line">systemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=35,pgrp=1,timeout=0,minproto=5,maxproto=5,direct,pipe_ino=14388)</span><br><span class="line">debugfs on /sys/kernel/debug type debugfs (rw,relatime)</span><br><span class="line">fusectl on /sys/fs/fuse/connections type fusectl (rw,relatime)</span><br><span class="line">hugetlbfs on /dev/hugepages type hugetlbfs (rw,relatime)</span><br><span class="line">mqueue on /dev/mqueue type mqueue (rw,relatime)</span><br><span class="line">binfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc (rw,relatime)</span><br><span class="line">/dev/sda6 on /var/lib/docker/plugins type ext4 (rw,relatime,errors=remount-ro,data=ordered)</span><br><span class="line">/dev/sda6 on /var/lib/docker/overlay2 type ext4 (rw,relatime,errors=remount-ro,data=ordered)</span><br><span class="line">tmpfs on /run/user/1000 type tmpfs (rw,nosuid,nodev,relatime,size=805424k,mode=700,uid=1000,gid=1000)</span><br><span class="line">gvfsd-fuse on /run/user/1000/gvfs type fuse.gvfsd-fuse (rw,nosuid,nodev,relatime,user_id=1000,group_id=1000)</span><br><span class="line">overlay on /var/lib/docker/overlay2/11f752fde5edf86629006ec82394104ea6d2aae976e6405ef6d4869778da429f/merged type overlay (rw,relatime,lowerdir=/var/lib/docker/overlay2/l/ZDXSUI2L7Y4HENN3T2GHYC5LJU:/var/lib/docker/overlay2/l/ADA5T6TYVRLYKPAVPODQNSCF52:/var/lib/docker/overlay2/l/XPMCVHKN3BEXXSALXLNSYUYFMO:/var/lib/docker/overlay2/l/5R26URBZ5NSECY72PGHX5WAWWK:/var/lib/docker/overlay2/l/FQZAI3MDWVDRY42VUHZ3YBOIKS:/var/lib/docker/overlay2/l/QPUPTA7AC26ZFQVTBCIAGHPF5U:/var/lib/docker/overlay2/l/XNABIOT3CIVDDNAUHXEEFXYEHP:/var/lib/docker/overlay2/l/CG5QFKLFHXWJQZ32DOHM2CJTJT:/var/lib/docker/overlay2/l/CHMNVKNFN5XGYYM3BJW5CR7WSJ,upperdir=/var/lib/docker/overlay2/11f752fde5edf86629006ec82394104ea6d2aae976e6405ef6d4869778da429f/diff,workdir=/var/lib/docker/overlay2/11f752fde5edf86629006ec82394104ea6d2aae976e6405ef6d4869778da429f/work)</span><br><span class="line">shm on /var/lib/docker/containers/dd7824bd7e728c7b6d15cf01601083d97cf3b0618ae11564d6a77ef4130a41e5/shm type tmpfs (rw,nosuid,nodev,noexec,relatime,size=65536k)</span><br><span class="line">nsfs on /run/docker/netns/8f2aba219191 type nsfs (rw)</span><br><span class="line">/dev/sda2 on /media/lkc/641042B510428E4C type fuseblk (rw,nosuid,nodev,relatime,user_id=0,group_id=0,default_permissions,allow_other,blksize=4096,uhelper=udisks2)</span><br><span class="line">/dev/sda3 on /media/lkc/新加卷 type fuseblk (rw,nosuid,nodev,relatime,user_id=0,group_id=0,default_permissions,allow_other,blksize=4096,uhelper=udisks2)</span><br></pre></td></tr></table></figure></p>
<h3>LVM逻辑卷</h3>
<ul>
<li>物理卷(PV):LVM的逻辑存储块</li>
<li>卷组(VG):磁盘设备,将单个或多个物理卷组合后生成卷组</li>
<li>物理长度(PE):将物理卷组合成卷组后,所划分的最小存储单位,默认PE为4MB</li>
<li>逻辑卷(LV):LVM的分区,可以指定从卷组中提取多少容量来创建逻辑卷,最后对其格式化并挂载使用</li>
</ul>
<p>使用LVM对磁盘或分区进行初始化</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pvcreate [选项] 物理卷 [物理卷...]</span><br></pre></td></tr></table></figure></p>
<p>创建卷组</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vgcreate [选项] 卷组名称 物理设备路径 [物理设备路径...]</span><br></pre></td></tr></table></figure></p>
<p>从卷组中提取存储空间,创建逻辑卷</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lvcreate [选项] 卷组名称或路径 [物理卷路径]</span><br></pre></td></tr></table></figure></p>
<h2>命令</h2>
<ol>
<li>
<p>查看所有用户</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ DESKTOP-8TLSHKQ in ~ [23:25:42] C:127</span><br><span class="line"><span class="meta">$</span> groups</span><br><span class="line">lkc lp sudo users netdev lpadmin scanner sambashare docker</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查看安装位置</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ DESKTOP-8TLSHKQ in /usr/bin [1:20:08] </span><br><span class="line"><span class="meta">$</span> whereis java</span><br><span class="line">java: /usr/share/java /opt/jdk1.8.0_151/bin/java /opt/jdk-9.0.1/bin/java</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>重启网卡</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ DESKTOP-8TLSHKQ in ~/Env/jdk1.8.0_161 [10:08:37] </span><br><span class="line"><span class="meta">$</span> sudo systemctl restart network-manager</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>查看进程使用情况</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ DESKTOP-8TLSHKQ in ~ [14:08:00] </span><br><span class="line"><span class="meta">$</span> top</span><br><span class="line"></span><br><span class="line">top - 14:09:00 up 12 min,  1 user,  load average: 3.39, 3.22, 2.06</span><br><span class="line">Tasks: 198 total,   2 running, 196 sleeping,   0 stopped,   0 zombie</span><br><span class="line"><span class="meta">%</span>Cpu(s):  1.2 us,  0.5 sy,  0.0 ni, 62.5 id, 35.8 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  8060400 total,   127856 free,   831072 used,  7101472 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  6606872 avail Mem </span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                               </span><br><span class="line"> 2402 lkc       20   0 2061320 134296  82028 S   2.0  1.7   0:06.12 deepin-music                                                                                          </span><br><span class="line">  245 root      20   0   11512   2296   1708 D   1.0  0.0   0:13.56 mount.ntfs                                                                                            </span><br><span class="line">  509 root      20   0  456196  15896  13132 S   0.7  0.2   0:00.83 NetworkManager                                                                                        </span><br><span class="line">  929 lkc       20   0  905644  13424  10184 S   0.7  0.2   0:02.72 pulseaudio                                                                                            </span><br><span class="line"> 1156 lkc       20   0 1451700 103692  72056 S   0.7  1.3   0:04.79 dde-dock                                                                                              </span><br><span class="line"> 1341 lkc       20   0 2271888  52504  36204 S   0.7  0.7   0:02.86 dde-session-dae                                                                                       </span><br><span class="line"> 2508 lkc       20   0   48712   3716   3068 R   0.7  0.0   0:00.08 top                                                                                                   </span><br><span class="line">    7 root      20   0       0      0      0 S   0.3  0.0   0:00.56 rcu_preempt                                                                                           </span><br><span class="line">  278 root       0 -20       0      0      0 S   0.3  0.0   0:05.37 loop0                                                                                                 </span><br><span class="line">  425 message+  20   0   48384   4756   3376 S   0.3  0.1   0:00.97 dbus-daemon                                                                                           </span><br><span class="line">  562 root      20   0  358204  82340  55460 S   0.3  1.0   0:16.03 Xorg                                                                                                  </span><br><span class="line">  833 lkc       20   0   48020   3964   2644 S   0.3  0.0   0:00.97 dbus-daemon</span><br></pre></td></tr></table></figure></p>
<ul>
<li>第一行：load average：最近一分钟内的平均系统负载为3.29，最近5分钟内的平均系统负载为3.22，最近15分钟内的平均系统负载为2.06</li>
<li>cpu行：us-用户空间占用的CPU百分比，sy-内核空间占用的CPU百分比，ni-改变过优先级的进程占用的CPU百分比，id-空闲CPU百分比，wa-I/O等待百分比，hi-硬中断占用的CPU百分比，si-软中断占用的CPU百分比</li>
<li>kib mem：物理内存总量-已使用的内存-空闲内存-缓存使用的内存</li>
<li>kib swap：虚拟内存总量-已使用的内存-空闲内存-缓冲的交换区总量</li>
</ul>
</li>
<li>
<p>系统服务管理器</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ DESKTOP-8TLSHKQ in ~ [17:23:01] </span><br><span class="line"><span class="meta">$</span> systemctl list-units --type=service</span><br></pre></td></tr></table></figure></p>
<p>显示所有已启动的服务
​</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable/disable httpd.service</span><br></pre></td></tr></table></figure></p>
<p>使某种服务自启动/不自启动
​</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start/stop/restart httpd.service</span><br></pre></td></tr></table></figure></p>
<p>启动/停止/重启某服务</p>
</li>
<li>
<p>修复网卡信息没有eth0</p>
<ol>
<li>
<p>sudo vim /etc/default/grub</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GRUB_BACKGROUND="/boot/grub/themes/deepin/background.png"</span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT="splash quiet net.ifnames=0 biosdevname=0"</span><br><span class="line">GRUB_DEFAULT="0"</span><br><span class="line">GRUB_DISTRIBUTOR="`/usr/bin/lsb_release -d -s 2&gt;/dev/null || echo Debian`"</span><br><span class="line">GRUB_GFXMODE="1024x768"</span><br><span class="line">GRUB_THEME="/boot/grub/themes/deepin/theme.txt"</span><br><span class="line">GRUB_TIMEOUT="1"</span><br></pre></td></tr></table></figure></p>
<p>在GRUB_CMDLINE_LINUX_DEFAULT=&quot;splash quiet&quot;后面加上net.ifnames=0 biosdevname=0</p>
</li>
<li>
<p>重新生成grub配置文件</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>重启计算机</p>
</li>
</ol>
</li>
<li>
<p>deepin无线网卡经常断
关闭无线网卡的省电模式（他人解决方案）</p>
<p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> lkc @ lkc-PC in ~ [21:37:31] </span><br><span class="line"><span class="meta">$</span> sudo iw dev wlan0 set power_save off</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> lkc @ lkc-PC in ~ [21:38:24] </span><br><span class="line"><span class="meta">$</span> sudo iwconfig wlan0  txpower fixed 20</span><br></pre></td></tr></table></figure></p>
<p>​</p>
</li>
<li>
<p>​</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="lkc"
    src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">lkc</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">28</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/xdlkc" title="GitHub &rarr; https://github.com/xdlkc" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wimness@163.com" title="E-Mail &rarr; mailto:wimness@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-163"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.douban.com/people/188153877" title="豆瓣 &rarr; https://www.douban.com/people/188153877" rel="noopener" target="_blank"><i class="fa fa-fw fa-豆瓣"></i>豆瓣</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lkc</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.2
  </div>

        












        
      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="http://cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-nest@1/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  

</body>
</html>
